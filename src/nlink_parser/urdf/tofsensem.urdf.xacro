<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="tofsensem">
  <!-- Dimensions (meters) -->
  <xacro:property name="L" value="0.065"/>
  <xacro:property name="W" value="0.025"/>
  <xacro:property name="H" value="0.015"/>
  <xacro:property name="default_mass" value="0.05"/>

  <!-- Robosense-style macro interface with nested origin block -->
  <xacro:macro
    name="TofSenseM"
    params="*origin parent:=base_link name:=tofsensem_optical_frame topic:=/tof/points hz:=10 samples:=1 gpu:=false mass:=${default_mass}"
  >
    <joint name="${name}_mount_joint" type="fixed">
      <xacro:insert_block name="origin"/>
      <parent link="${parent}"/>
      <child link="${name}"/>
    </joint>

    <link name="${name}">
      <inertial>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="${mass}"/>
        <inertia
          ixx="${mass * (W*W + H*H) / 12.0}"
          iyy="${mass * (L*L + H*H) / 12.0}"
          izz="${mass * (L*L + W*W) / 12.0}"
          ixy="0" ixz="0" iyz="0"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="${L} ${W} ${H}"/>
        </geometry>
        <material name="tofsensem_material">
          <color rgba="0.2 0.2 0.2 1.0"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="${L} ${W} ${H}"/>
        </geometry>
      </collision>
    </link>
  </xacro:macro>
</robot>

